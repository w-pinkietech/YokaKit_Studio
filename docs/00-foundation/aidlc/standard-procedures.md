## AIDLC Standard Procedures（SOP）

### 0. 前提
- すべての作業は Issue 起点。`track::framework` + `artifact::documentation|code` 等のラベルを付与
- ブランチ: `framework/<issue-number>-<slug>`、PR に `Closes #<n>` を記載

### 1. Inception（意図・設計）
1) 目的・対象・制約を簡潔に定義
2) 用語・境界（ドメインモデルの骨子）をまとめる
3) ADR（候補案/採用理由/代替案）を用意し、採用判断

チェック
- [ ] 目的/制約/用語が合意
- [ ] ADR が最新でリンク切れなし

完了条件
- 合意済みの目的/制約/用語が `rules.md` などから参照可能で、主要リンクに切れがない。
- 採用された ADR の影響範囲が記載され、以後の作業で前提とされる。

### 2. Construction（仕様→テスト→実装）
1) 合格基準を定義（仕様/テスト）し FAIL から開始
2) 実装を最小で充足→再実行→リファクタ
3) カバレッジと品質基準の確認（必要に応じ 100%）

チェック
- [ ] 仕様とテストが対応（トレーサブル）
- [ ] すべて PASS、基準達成
- [ ] ドキュメント/テンプレートの更新が同期

完了条件
- テストスイートが PASS し、定義した合格基準（例: カバレッジ）を満たす。
- 関連ドキュメント（README/AGENTS/INDEX, 仕様, マッピング）が更新され、リンクが有効。

### 3. Operations（運用・レビュー）
1) 変更履歴・影響範囲を記録
2) リンク監査（相対リンク、索引、三点セット）
3) 定期レビューの観点で TODO/Issue を起票

チェック
- [ ] 参照が最新、リンク切れなし
- [ ] 影響範囲のフォローアップ完了

完了条件
- リリースノート/PR説明に変更理由・影響範囲・検証結果がまとまっている。
- 必要なフォローアップ Issue が起票され、次のサイクルに引き継がれている。

### 4. 実務コマンド
- 相対リンク検査: `rg -n "\[[^\]]+\]\((?!https?://)[^)]+\)" docs`
- ツリー生成: `tree -a -F -I ".git|.DS_Store|node_modules|dist" docs`
- TODO 検出: `rg -n "TODO|FIXME|TBD" docs`

### 5. Cross-Repository Changes（複数リポ横断）
事前
- 権限/トークン/CI 実行可否の確認（対象リポすべて）。
- ブランチ命名の統一（例: `framework/<issue>-<slug>` または `feature/<slug>`）。
- PR 接頭辞の統一（例: `[change-pkg:#<issue>]`）。

実行
- リポ別に単体テスト/ビルドを確認 → 最低1本の統合検証を実施。
- 変更順序（例: backend → frontend）を定義し、互換性のある状態で段階的にマージ。

終了
- すべての PR がマージされ、必要なタグ/リリース/通知が完了。
- `records/` に Change Package の要約を追加（`records/packages/`）。
- `records/INDEX.md` にリンクを追記。
