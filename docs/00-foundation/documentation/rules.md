# Documentation Rules

ドキュメントを作成・保守する際に必ず従うべきガバナンスとスタイルの原則をまとめる。標準手順（SOP）は `standard-procedures.md` を参照する。

## 1. ガバナンス原則

### 1.1 三点セットと導線
- すべての主要ディレクトリに `README.md`（人間向け概要）、`AGENTS.md`（AI 向け指示）、`INDEX.md`（索引用）を揃える。サブディレクトリを追加する際も同時に整備する。
- README と AGENTS は同じアウトラインを共有しつつ、読者ごとの詳細度を調整する。
- 新しいファイルやサブディレクトリを追加したら INDEX を更新し、相互リンクを確認する。

### 1.2 コンテンツ配置と重複防止
- 同じ情報を複数ファイルに記載しない。唯一の出典を決め、他ファイルからはリンクで参照する。
- 1 ファイルの長さが 1,000 行前後、またはセクションが 6 つ以上になった場合はテーマ別に分割し、INDEX からリンクする。
- README では目的・対象読者・主要導線を明示し、AGENTS ではタスク遂行に必要な前提とチェックリストに絞る。

### 1.3 ディレクトリとツリー表記
- ディレクトリ名は `docs/<section>/<topic>/` のように論理的なカテゴリ名を用い、README でマッピングを説明する。
- ツリーを掲載する際は Markdown のコードブロックで表記し、三点セットを先頭、その他のファイルはアルファベット順に並べる。
- 不要な階層は避け、導線設計が複雑になった場合は README で役割を補足する。

### 1.4 リンク運用
- リポジトリ内リンクは相対パスで記述する。
- 外部リンクは HTTPS を用い、意味のあるリンクテキスト（「こちら」等は避ける）を付ける。
- Issue / PR を参照する際は `#<number>` 形式を使い、初出では概要を添える。

### 1.5 チェックリスト
- [ ] 三点セットが揃い、最新内容へ更新されている。  
- [ ] 追加・分割したファイルに対して INDEX と主要導線を更新済み。  
- [ ] 重複や矛盾がなく、唯一の出典へリンクされている。  
- [ ] 非公開情報が公開ドキュメントへ含まれていない。  
- [ ] `.aidlc/contexts/` やサブモジュールと内容が整合している。  
- [ ] 変更理由と影響範囲を Issue / PR に記録した。  

## 2. スタイル原則

### 2.1 基本方針
- ドキュメント冒頭で目的と対象読者を明記し、意図を最初に伝える。
- 1 文は目安 25 語で簡潔にまとめ、曖昧な表現や冗長な重複を避ける。
- 変更は必ず関連 Issue と紐づけ、背景と判断理由を残す。

### 2.2 言語・表記
- 標準は日本語（敬体）とし、専門用語は必要に応じて英語を併記する。
- 英数字・記号は ASCII を用い、ファイル名やコマンドはバッククォートで囲む。
- 文体の混在や表記ゆれがないかセルフチェックを行う。

### 2.3 構造と見出し
- H1 はタイトルにのみ使用し、本文は H2 以降で階層化する。
- 各セクション冒頭に概要を 1 行で記載し、長文は 2 段落以内で区切る。
- 手順は番号付きリスト、箇条書きはハイフンに統一する。

### 2.4 フォーマットとコード
- コマンドや設定例は言語名付きフェンスコード（例: ```bash）を利用する。
- インラインコードは `` `command` `` の形式で明示し、表は必要最低限に抑える。
- 特殊記号や絵文字は意味が明確な場合のみ使用する。

### 2.5 リンクと参照
- 参照先が最新化されているか、変更が必要な場合は Issue / TODO を記録する。
- リンク切れを防ぐため、プレビューで動作確認し、PR 説明にも主なリンクを記載する。

### 2.6 Mermaid 図
- 表現したい構造に合わせて `graph TB`（階層構造）や `flowchart LR`（左→右のフロー）など適切なタイプを選択する。
- 情報の流れが一目で分かるレイアウトとし、ノードテキストは 3 行以内に収める。
- 既定のカラーパレットとストローク幅を利用し、図同士でトーンを揃える。

| 用途 | fill | stroke | stroke-width | text |
|------|------|--------|--------------|------|
| Context Studio / Inception | `#16213e` | `#2ec4b6` | `4px` (主要グループ) / `2px` (ノード) | `#ffffff` |
| Code Output / Construction | `#1a1a2e` | `#7f5af0` | 同上 | `#ffffff` |
| References / Operations | `#0f3460` or `#162447` | `#feca57` or `#1dd1a1` | 同上 | `#ffffff` |
| ハイライトノード | `#2d2d44`, `#533483`, `#724e91`, `#5c2e7e` | `#7f5af0`, `#9d4edd`, `#c77dff` | `2px` | `#ffffff` |
| 注意・判定ノード | `#5c2e7e` | `#e63946` | `2px` | `#ffffff` |

> 追加色が必要な場合は Issue で合意を取ること。ノード ID は CamelCase など読みやすい形式を使用する。

### 2.7 テンプレート指針
- 役割と責務を以下の通り明文化する。

| 役割 | 主な責務 |
|------|----------|
| Human Maintainer | Issue 起票、影響範囲の判断、レビュー承認、最終合意の記録。 |
| AI Maintainer | 提案作成、テンプレート初期案の編集、リンク更新、チェックリスト実行。 |
| Repository User | テンプレートからドキュメントを生成し、利用状況や不備をフィードバック。 |

- 利用者が手順を誤解しないよう、サンプルや補足コメントをテンプレートに含める。
- テンプレートを導入するディレクトリにも三点セットを整備し、INDEX から導線を張る。
- 変更時は影響範囲を洗い出し、利用者への周知とドキュメント更新を徹底する。詳細フローは標準手順を参照。

### 2.8 スタイルチェックリスト
- [ ] 目的・対象読者・範囲が冒頭で明示されている。  
- [ ] 文体・表記ゆれがなく、英数字は半角で統一されている。  
- [ ] 見出しとリストの形式がルールに従っている。  
- [ ] コード／表のフォーマットが統一され、言語ラベルが付いている。  
- [ ] リンク切れや冗長な参考がない。  
- [ ] 図表やテンプレートのスタイルがガイドラインに沿っている。  
