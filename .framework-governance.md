# Framework Governance & Label Strategy

このドキュメントは、YokaKit Studio のフレームワーク整備期における Issue / Label 運用や自動化スクリプトをまとめたものです。AI-DLC 本体のプロセスとは独立に参照できます。

---

## ラベル体系（初期セット）

フレームワーク構築中はラベル軸を最小限にし、`<軸>::<値>` で統一します。各 Issue には最低限 `track` / `artifact` / `status` / `impact` を付与し、必要に応じて `lifecycle` を追加します。

| 軸 | 値 | 用途 |
|----|----|------|
| `track::` | `framework` / `delivery` / `operations` | 作業の大枠。現状は `track::framework` が中心。 |
| `artifact::` | `process` / `documentation` / `tooling` | 触れている成果物の種別。AI-DLC 固有の階層は後日分割。 |
| `lifecycle::` | `draft` / `in-review` / `approved` | 合意プロセスの進行状況。必要な Issue のみに付与。 |
| `status::` | `needs-decision` / `blocked` / `ready` | 次のアクションを明示。1 Issue につき 1 種類。 |
| `impact::` | `high` / `medium` / `low` | 優先度や波及範囲の指標。 |

### 運用ルール

- `track::framework` でフレームワーク整備 Issue を集約し、合意後に `track::delivery` へ展開。
- `artifact::process` はワークフローや手順、`artifact::documentation` は README などの記述、`artifact::tooling` は CLI・スクリプト整備に割り当てる。
- レビュー待ちの段階で `lifecycle::in-review`、承認されドキュメント反映が完了したら `lifecycle::approved` とする。
- `status::needs-decision` は方針決定待ち、`status::ready` は実装・反映準備完了、`status::blocked` は外的要因待ちを示す。

### ラベル組み合わせ例

```
track::framework + artifact::process + status::needs-decision + impact::high
→ Submodule 更新フローの再設計（README.md:277 を根拠に議論開始）

track::framework + artifact::documentation + status::needs-decision + impact::medium
→ スラッシュコマンド実行環境の明文化（README.md:255, 327, 451）

track::framework + artifact::documentation + status::needs-decision + impact::medium
→ テスト先行プロセス記述の統一（README.md:342-347 と 405-410 の整合性確認）
```

---

## Issue テンプレート（推奨構成）

```
## 背景 / Context
- 何が起きているか、どのドキュメント/箇所が対象か

## 課題 / Problem
- 現状の問題点・リスク

## 提案 / Proposal
- 取りうる解決策や論点

## 影響 / Impact
- 波及範囲、想定されるメリット/デメリット

## 次のアクション / Next Actions
- 決定が必要なこと、作業オーナー、期限の目安
```

---

## Pull Request ワークフロー

フレームワーク関連の変更（本ドキュメント、README、AI-DLCワークフローの定義、スクリプトなど）はすべて PR を通して取り込む。以下の流れを原則とする。

1. **Issue を起票**  
   - 上記テンプレートとラベルを用いて背景・課題・提案を明文化。  
   - `status::needs-decision` で開始し、方向性合意後に `status::ready` へ更新。

2. **ブランチ命名**  
   - `framework/<issue-number>-<slug>` 形式を推奨。例: `framework/12-label-governance`.

3. **PR 作成時の要件**  
   - タイトル冒頭に `[framework]` を付け、関連 Issue を `Closes #<issue>` でリンク。  
   - 変更概要、影響範囲、検証手順（必要ならDry-runコマンド等）を記載。

4. **レビュー & 承認**  
   - 最低 1 名のレビュアー（プロダクトオーナー or テックリード）が必要。  
   - 合意済みであれば `lifecycle::in-review` → 承認後に `lifecycle::approved`。

5. **マージ条件**  
   - 必須レビューが承認済みであること。  
   - ラベル同期スクリプト等の動作確認結果をコメントで共有すること。  
   - 付随するドキュメント更新が含まれていること（README からの参照を忘れずに）。

6. **マージ後**  
   - Issue をクローズし、必要であればフォローアップのTODOを新規Issueで登録。

> 緊急対応が必要な場合でもドラフトPRを作成し、議論の場を一元化すること。

---

## ラベル同期スクリプト

`scripts/setup_labels.sh` はこのドキュメントで定義したラベルセットを GitHub リポジトリへ同期するためのユーティリティです。

### 必要要件

- `curl`
- `python3`
- ラベル管理が可能な GitHub Personal Access Token（`repo` 権限以上）

### 使い方

```bash
# Dry-run で適用内容を確認
GITHUB_TOKEN=ghp_xxx scripts/setup_labels.sh w-pinkietech/YokaKit_Studio --dry-run

# 実際にラベルを作成/更新
GITHUB_TOKEN=ghp_xxx scripts/setup_labels.sh w-pinkietech/YokaKit_Studio
```

> `GITHUB_TOKEN` は実行時の環境変数として渡してください。Dry-run 時は API には書き込みません。

### 実装メモ

- 既存ラベルがあれば `PATCH` で更新、なければ `POST` で新規作成。
- `--dry-run` オプションで API 呼び出しを行わずに適用内容を表示。
- カラーコードや説明文はこのファイル内の表と揃える。変更があれば本ファイルとスクリプトの双方を更新してください。

---

## 今後の拡張

- フレームワーク整備が落ち着いたら、`artifact::` 系ラベルを AI-DLC 階層（Intent / Domain Design など）へ細分化。
- Milestone や Project Boards での運用ルールが固まった段階で、別途 `Project Governance` セクションを追加予定。
- スクリプトの Node.js / Python 版 CLI などが必要になった場合は `scripts/` 以下でモジュール化し、本ドキュメントから参照する。
